<% content_for :javascript do %>
<script>
  $('.flexslider').flexslider({
    animation: "slide",
    controlNav: "thumbnails"
  });
  $(".select_change").value = 1;
  $(".select_change").change(function(){ 
    $(".selected_items").hide();
    if (this.value == 1) {
      $("#shows_names").show();
      $("#shows_ratings").show();
    } else if (this.value == 2) {
      $("#seasons_names").show();
      $("#seasons_ratings").show();
    } else {
      $("#episodes_names").show();
      $("#episodes_ratings").show();
    }
  });
</script>
<% end %>

<div class="row-fluid" style="margin-top:0px">
  <div class="span7">
<div class="flexslider" style="margin-bottom:20px;" class="clearfix">
  <ul class="slides">
    <li data-thumb="/assets/breaking_bad.jpg">
     <%= link_to image_tag("/assets/breaking_bad.jpg", :style => "position:relative"), tv_shows_path %>
        <p class="flex-caption">Featured Show: Breaking Bad</p>
    </li>
    <li data-thumb="/assets/archer.png">
     <%= link_to image_tag("/assets/archer.png", :style => "position:relative"), tv_shows_path %>
        <p class="flex-caption">Featured Show: Archer</p>
    </li>   
    <li data-thumb="/assets/game_of_thrones.png">
     <%= link_to image_tag("/assets/game_of_thrones.png", :style => "position:relative"), tv_shows_path %>
         <p class="flex-caption">Featured Show: Game of Thrones</p>
    </li>  
    <li data-thumb="/assets/the_americans.png">
     <%= link_to image_tag("/assets/the_americans.png", :style => "position:relative"),  tv_shows_path %>
         <p class="flex-caption">Featured Show: The Americans</p>
    </li>
  </ul>
</div>
  </div>
  <div class="span5">  	
  	<h4>
  		<form action="index" class="display:inline; float:left;">
  			<%= select( "type", "select", { "Top TV Shows" => "1", "Top TV Seasons" => "2", "Top TV Episodes" => "3"}, {}, :class => 'select_change') %>
		on
        <%= select( "website", "select", { "IMDB" => "IMDB", "Metacritic" => "Metacritic", "Netflix" => "Netflix"}, {}, :class => 'input-small select_change') %>
		</form> 
	</h4>
  <div class="row-fluid">
    <div class="span9">
      <ol id="shows_names" class="selected_items" style="font-size:14px; margin-left:50px;">
        <% if !@top_shows.nil? and @top_shows.count > 0  %>
          <% @top_shows.each do |tv_show| %>
            <li><%= link_to(tv_show.title, tv_show_path(tv_show)) %></li>
          <% end %>
        <% end %>
      </ol>
      <ol id="episodes_names" class="selected_items" style="font-size:14px; margin-left:50px; display:none;">
        <% if !@top_episodes.nil? and @top_shows.count > 0  %>
          <% @top_episodes.each do |tv_show| %>
            <% if !tv_show.title.nil? and tv_show.title.length > 0 %>
              <li><%= link_to(tv_show.title, tv_episode_path(tv_show)) %></li>
            <% else %>
              <li><%= link_to("Episode", tv_episode_path(tv_show)) %></li>
            <% end %>              
          <% end %>
        <% end %>
      </ol>
      <div id="seasons_names" class="selected_items" style="display:none">This has not yet been implemented.</div>
    </div>
    <div class="span1">
      <ul id="shows_ratings" class="selected_items" style="font-size:14px;list-style:none">
        <% if !@top_shows.nil? and @top_shows.count > 0 %>
          <% @top_shows.each do |tv_show| %>
            <li><span class="badge badge-info"><%= tv_show.total_rating %><span></li>
          <% end %>
        <% end %>
      </ul>
      <ul id="episodes_ratings" class="selected_items" style="font-size:14px;list-style:none; display:none;">
        <% if !@top_episodes.nil? and @top_shows.count > 0 %>
          <% @top_episodes.each do |tv_show| %>
            <li><span class="badge badge-info"><%= tv_show.total_rating %><span></li>
          <% end %>
        <% end %>
      </ul>
    </div>
  </div>
</div>
</div>
<div class="row-fluid">
  <div class="span7">
    <h3>Recent reviews</h3>
    <% if !@recentReviews.nil? %>
      <div id="recentReviews"><%= render 'layouts/reviews' %></div> 
    <% end %> 
  </div>
  <div class="span5">
  	<h3>News and Updates</h3>
    <ul>
      <li style="margin-bottom:10px;"><h6>Update #3<span class="pull-right">04/31/13</span></h6></li>
      <li style="margin-bottom:12px;">Adding new fields to review advanced search for show and episode title</li>
      <li style="margin-bottom:10px;"><h6>Update #2<span class="pull-right">04/30/13</span></h6></li>
      <li style="margin-bottom:12px;">Now pulling in reviews from Doux Reviews</li>
      <li style="margin-bottom:10px;"><h6>Update #1<span class="pull-right">04/28/13</span></h6></li>
      <li style="margin-bottom:12px">Updating shows, episodes, genres, and ratings info every week</li>
    </ul>
  </div>
</div>

